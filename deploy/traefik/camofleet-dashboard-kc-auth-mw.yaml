apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: camofleet-ui-kc-auth
  namespace: camofleet
spec:
  plugin:
    keycloakopenid:
      keycloakURL: "https://auth.synestra.io"
      keycloakRealm: "platform"
      clientID: "camofleet"
      clientSecretFile: "/run/secrets/camofleet/client-secret"
      scope: "openid profile email"
      userHeaderName: "X-User"
      userClaimName: "preferred_username"
      # Protect all control-plane surfaces via Keycloak; keep prefixes aligned with public APIs if they ever change.
